<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>构造函数</title>
    <url>/Stouyx/2023/05/09/%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0/</url>
    <content><![CDATA[<h2 id="为什么需要构造函数"><a href="#为什么需要构造函数" class="headerlink" title="为什么需要构造函数"></a>为什么需要构造函数</h2><img src="https://www.helloimg.com/images/2023/05/09/oxnHQ6.png" width="60%" height="70%">

<p>每次需要调用SetDate函数<br>十分麻烦<br>此时需要构造函数来出👋</p>
<h2 id="构造函数的概念特征"><a href="#构造函数的概念特征" class="headerlink" title="构造函数的概念特征"></a>构造函数的概念特征</h2><p>能够保证对象被初始化。<br>构造函数是特殊的成员函数，主要任务是初始化，而不是开空间。（虽然构造函数的名字叫构造）<br>构造函数是特殊的成员函数，主要特征如下：<br>① 构造函数的函数名和类名是相同的<br>② 构造函数无返回值<br>③ 构造函数可以重载<br>③ 会在对象实例化时自动调用对象定义出来。</p>
<img src="https://www.helloimg.com/images/2023/05/09/oxnbyn.png" width="70%" height="80%">
<img src="https://www.helloimg.com/images/2023/05/09/oxnMmR.png" width="100%" height="20%">

<p>不给参数时就会调用无参构造函数，给参数则会调用带参构造函数<br>！！！！<br>注意事项：<br>① 构造函数是特殊的，不是常规的成员函数，不能直接调 </p>
<p>d1.Date();</p>
<p>② 如果通过无参构造函数创建对象，对象后面不用跟括号，否则就成了函数声明。</p>
<img src="https://www.helloimg.com/images/2023/05/09/oxn2cz.png" width="70%" height="80%">

<p>③ 这里如果调用带参构造函数，我们需要传递三个参数（这里我们没设缺省） 。<br>④ 如果你没有自己定义构造函数（类中未显式定义），C++ 编译器会自动生成一个无参的默认构造函数。当然，如果你自己定义了，编译器就不会帮你生成了。<br><img src="https://www.helloimg.com/images/2023/05/09/oxnTVA.png" width="60%" height="80%"></p>
<p>输出：</p>
<img src="https://www.helloimg.com/images/2023/05/09/oxn9X5.png" width="80%" height="20%">

<h2 id="默认构造函数："><a href="#默认构造函数：" class="headerlink" title="默认构造函数："></a>默认构造函数：</h2><p>任何一个类的默认构造函数，只有三种：<br>① 无参的构造函数<br>② 全缺省的构造函数<br>③ 我们不写，编译器自己生成的构造函数<br>并且默认构造函数只能有一个！<br>注意事项：<br>① 无参构造函数、全缺省构造函数、我们没写编译器默认生成的无参构造函数，都可以认为是默认成员函数。<br>② 语法上无参和全缺省可以同时存在，但如果同时存在会引发二义性：<br>可以同时存在，但是不能调用构造函数否则报错</p>
<p>无参构造函数，全缺省构造函数：</p>
<img src="https://www.helloimg.com/images/2023/05/09/oxnc8m.png" width="70%" height="40%">

<p>举例：</p>
<img src="https://s1.imagehub.cc/images/2023/05/09/image.png" width="70%" height="80%">

<img src="https://www.helloimg.com/images/2023/05/09/oxnsrY.png" width="70%" height="80%">]]></content>
      <categories>
        <category>语法</category>
      </categories>
      <tags>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>停车场管理系统</title>
    <url>/Stouyx/2023/05/08/%E5%81%9C%E8%BD%A6%E5%9C%BA%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/</url>
    <content><![CDATA[<p>系统演示视频：<a href="https://b23.tv/2scBrDx">🔗</a><br>源代码：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#define _CRT_SECURE_NO_WARNINGS</span><br><span class="line">#pragma warning( disable : 4992)</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;ctime&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;fstream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">class chang</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    int car_sum;</span><br><span class="line">    int electric_sum;</span><br><span class="line">    int truck_sum;</span><br><span class="line">    int car_price;</span><br><span class="line">    int electric_price;</span><br><span class="line">    int truck_price;</span><br><span class="line">    chang()</span><br><span class="line">    &#123;</span><br><span class="line">        car_sum=0;</span><br><span class="line">        electric_sum=0;</span><br><span class="line">        truck_sum=0;</span><br><span class="line">        car_price=0;</span><br><span class="line">        electric_price=0;</span><br><span class="line">        truck_price=0;</span><br><span class="line">    &#125;</span><br><span class="line">    chang(int a,int b,int c,int d,int e,int f)</span><br><span class="line">    &#123;</span><br><span class="line">        car_sum=a;</span><br><span class="line">        electric_sum=b;</span><br><span class="line">        truck_sum=c;</span><br><span class="line">        car_price=d;</span><br><span class="line">        electric_price=e;</span><br><span class="line">        truck_price=f;</span><br><span class="line">    &#125;</span><br><span class="line">    friend ostream &amp; operator&lt;&lt;(ostream &amp; cout, const chang &amp; st);</span><br><span class="line">&#125;;</span><br><span class="line">ostream &amp; operator&lt;&lt;(ostream &amp; cout, const chang &amp;st)</span><br><span class="line">&#123;</span><br><span class="line">    cout&lt;&lt;&quot;小轿车总数：&quot;&lt;&lt;st.car_sum&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;&quot;电动车总数：&quot;&lt;&lt;st.electric_sum&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;&quot;货车总数：&quot;&lt;&lt;st.truck_sum&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;&quot;小轿车停车价格：&quot;&lt;&lt;st.car_price&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;&quot;电动车停车价格：&quot;&lt;&lt;st.electric_price&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;&quot;货车停车价格：&quot;&lt;&lt;st.truck_price&lt;&lt;endl;</span><br><span class="line">    return cout;</span><br><span class="line">&#125;</span><br><span class="line">class Time</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    int year;</span><br><span class="line">    int month;</span><br><span class="line">    int day;</span><br><span class="line">    int hour;</span><br><span class="line">    int min;</span><br><span class="line">    Time(int _year=0, int _month=0, int _day=0, int _hour=0, int _min=0)</span><br><span class="line">    &#123;</span><br><span class="line">        year = _year;</span><br><span class="line">        month = _month;</span><br><span class="line">        day = _day;</span><br><span class="line">        hour = _hour;</span><br><span class="line">        min = _min;</span><br><span class="line">    &#125;</span><br><span class="line">    void print()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; year &lt;&lt; &quot;年&quot; &lt;&lt; month &lt;&lt; &quot;月&quot; &lt;&lt; day &lt;&lt; &quot;日&quot; &lt;&lt; hour &lt;&lt; &quot;时&quot; &lt;&lt; min &lt;&lt; &quot;分&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    friend ostream &amp; operator&lt;&lt;(ostream &amp; cout, const Time &amp; st);</span><br><span class="line">&#125;;</span><br><span class="line">ostream &amp; operator&lt;&lt;(ostream &amp; cout, const Time &amp; st)</span><br><span class="line">&#123;</span><br><span class="line">    cout &lt;&lt; st.year &lt;&lt; &quot;年&quot; &lt;&lt; st.month &lt;&lt; &quot;月&quot; &lt;&lt; st.day &lt;&lt; &quot;日&quot; &lt;&lt; st.hour &lt;&lt; &quot;时&quot; &lt;&lt; st.min &lt;&lt; &quot;分&quot; &lt;&lt; endl;</span><br><span class="line">    return cout;</span><br><span class="line">&#125;</span><br><span class="line">class park</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    Time t;</span><br><span class="line">    int type;</span><br><span class="line">    int chewei;//车位号</span><br><span class="line">    char chepai[5];//车牌号</span><br><span class="line">    bool condition;</span><br><span class="line">    park(Time _t,int _type,int a,char* c, bool b)</span><br><span class="line">    &#123;</span><br><span class="line">        t=_t;</span><br><span class="line">        type = _type;</span><br><span class="line">        chewei = a;</span><br><span class="line">        condition = false;</span><br><span class="line">        strcpy(chepai, c);</span><br><span class="line">    &#125;</span><br><span class="line">    park()</span><br><span class="line">    &#123;</span><br><span class="line">        chepai[0]=&#x27;\0&#x27;;</span><br><span class="line">        type=0;</span><br><span class="line">        chewei=0;</span><br><span class="line">        condition = false;</span><br><span class="line">    &#125;</span><br><span class="line">    void print()</span><br><span class="line">    &#123;</span><br><span class="line">        if(type==1)&#123;</span><br><span class="line">            cout&lt;&lt;&quot;轿车&quot;&lt;&lt;endl;</span><br><span class="line">        &#125;</span><br><span class="line">        if(type==2)&#123;</span><br><span class="line">            cout&lt;&lt;&quot;电动车&quot;&lt;&lt;endl;</span><br><span class="line">        &#125;</span><br><span class="line">        if(type==3)&#123;</span><br><span class="line">            cout&lt;&lt;&quot;货车&quot;&lt;&lt;endl;</span><br><span class="line">        &#125;</span><br><span class="line">        cout&lt;&lt;&quot;车位号：&quot;&lt;&lt;chewei&lt;&lt;endl;</span><br><span class="line">        cout&lt;&lt;&quot;车牌号：&quot;&lt;&lt;chepai&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">class vehicle</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    Time t;</span><br><span class="line">    char* car_num;</span><br><span class="line">    bool condition;</span><br><span class="line">    int chewei;</span><br><span class="line">    virtual void in() = 0;</span><br><span class="line">    virtual void out() = 0;</span><br><span class="line">    virtual void print() = 0;</span><br><span class="line">    vehicle(Time _t,char* a,int b ,bool c)</span><br><span class="line">    &#123;</span><br><span class="line">        t = _t;</span><br><span class="line">        strcpy(car_num, a);</span><br><span class="line">        chewei=b;</span><br><span class="line">        condition = c;</span><br><span class="line">    &#125;</span><br><span class="line">    vehicle()</span><br><span class="line">    &#123;</span><br><span class="line">        car_num=0;</span><br><span class="line">        chewei=0;</span><br><span class="line">        condition=false;</span><br><span class="line">    &#125;</span><br><span class="line">    ~vehicle()</span><br><span class="line">    &#123;</span><br><span class="line">        delete []car_num;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">class electric : public vehicle</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    electric(Time _t, char* a,int b, bool d):vehicle(_t,a,b,d)&#123;&#125;</span><br><span class="line">    electric():vehicle()&#123;&#125;</span><br><span class="line">    virtual void in();</span><br><span class="line">    virtual void out();</span><br><span class="line">    virtual void print();</span><br><span class="line">&#125;;</span><br><span class="line">void electric::in()</span><br><span class="line">&#123;</span><br><span class="line">    condition = true;</span><br><span class="line">&#125;</span><br><span class="line">void electric::out()</span><br><span class="line">&#123;</span><br><span class="line">    condition = false;</span><br><span class="line">&#125;</span><br><span class="line">void electric::print()</span><br><span class="line">&#123;</span><br><span class="line">    cout &lt;&lt; &quot;      电动车&quot; &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; &quot;车牌号：&quot; &lt;&lt; car_num&lt;&lt;endl;</span><br><span class="line">    if (condition == true) &#123;</span><br><span class="line">        cout &lt;&lt; &quot;是否停在停车场：&quot;;</span><br><span class="line">        cout &lt;&lt; &quot;是&quot; &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; &quot;进入停车场的时间:&quot; &lt;&lt; endl;</span><br><span class="line">        t.print();</span><br><span class="line">    &#125;</span><br><span class="line">    else &#123;</span><br><span class="line">        cout &lt;&lt; &quot;是否停在停车场：&quot;;</span><br><span class="line">        cout &lt;&lt; &quot;否&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">class car : public vehicle</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    virtual void in();</span><br><span class="line">    virtual void out();</span><br><span class="line">    virtual void print();</span><br><span class="line">    car(Time _t, char* a,int b, bool d):vehicle(_t,a,b,d) &#123;&#125;</span><br><span class="line">    car():vehicle()&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line">void car::in()</span><br><span class="line">&#123;</span><br><span class="line">    condition = true;</span><br><span class="line">&#125;</span><br><span class="line">void car::out()</span><br><span class="line">&#123;</span><br><span class="line">    condition = false;</span><br><span class="line">&#125;</span><br><span class="line">void car::print()</span><br><span class="line">&#123;</span><br><span class="line">    cout &lt;&lt; &quot;      小轿车&quot; &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; &quot;车牌号：&quot; &lt;&lt; car_num &lt;&lt; endl;</span><br><span class="line">    if (condition == true) &#123;</span><br><span class="line">        cout &lt;&lt; &quot;是否停在停车场：&quot;;</span><br><span class="line">        cout &lt;&lt; &quot;是&quot; &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; &quot;进入停车场的时间:&quot; &lt;&lt; endl;</span><br><span class="line">        t.print();</span><br><span class="line">    &#125;</span><br><span class="line">    else &#123;</span><br><span class="line">        cout &lt;&lt; &quot;是否停在停车场：&quot;;</span><br><span class="line">        cout &lt;&lt; &quot;否&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">class truck : public vehicle</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    int load;</span><br><span class="line">    virtual void in();</span><br><span class="line">    virtual void out();</span><br><span class="line">    virtual void print();</span><br><span class="line">    truck(Time _t,char* a, int b,int c, bool d);</span><br><span class="line">    truck():vehicle()&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line">truck::truck(Time _t, char* a, int b,int c, bool d) : vehicle(_t,a,b, d)</span><br><span class="line">&#123;</span><br><span class="line">    load = c;</span><br><span class="line">&#125;</span><br><span class="line">void truck::in()</span><br><span class="line">&#123;</span><br><span class="line">    condition = true;</span><br><span class="line">&#125;</span><br><span class="line">void truck::out()</span><br><span class="line">&#123;</span><br><span class="line">    condition = false;</span><br><span class="line">&#125;</span><br><span class="line">void truck::print()</span><br><span class="line">&#123;</span><br><span class="line">    cout &lt;&lt; &quot;      货车&quot; &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; &quot;车牌号：&quot; &lt;&lt; car_num &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; &quot;载货量：&quot; &lt;&lt; load &lt;&lt; endl;</span><br><span class="line">    if (condition == true) &#123;</span><br><span class="line">        cout &lt;&lt; &quot;是否停在停车场：&quot;;</span><br><span class="line">        cout &lt;&lt; &quot;是&quot; &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; &quot;进入停车场的时间:&quot; &lt;&lt; endl;</span><br><span class="line">        t.print();</span><br><span class="line">    &#125;</span><br><span class="line">    else &#123;</span><br><span class="line">        cout &lt;&lt; &quot;是否停在停车场：&quot;;</span><br><span class="line">        cout &lt;&lt; &quot;否&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">bool leap_year(int a)</span><br><span class="line">&#123;</span><br><span class="line">    if ((a % 4 == 0 &amp;&amp; a % 100 != 0 )|| a % 400 == 0) &#123;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">    else &#123;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">int sum_time(Time a,Time b)//后面是取车前面是停车</span><br><span class="line">&#123;</span><br><span class="line">    int leap_year_num = 0;</span><br><span class="line">    int normal_year_num = 0;</span><br><span class="line">    int day_left=0;</span><br><span class="line">    int day_right = 0;</span><br><span class="line">    int hour_left = 0;</span><br><span class="line">    int hour_right = 0;</span><br><span class="line">    for (int i = a.year+1; i &lt;= b.year; i++) &#123;</span><br><span class="line">        if (leap_year(i)) &#123;</span><br><span class="line">            leap_year_num++;</span><br><span class="line">        &#125;</span><br><span class="line">        else &#123;</span><br><span class="line">            normal_year_num++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if (leap_year(a.year)) &#123;</span><br><span class="line">        if (a.month == 1) &#123;</span><br><span class="line">            day_left = 366 - a.day-1;</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 2) &#123;</span><br><span class="line">            day_left = 306 + (29 - a.day - 1);</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 3) &#123;</span><br><span class="line">            day_left = 275 + (31 - a.day - 1);</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 4) &#123;</span><br><span class="line">            day_left = 245 + (30 - a.day - 1);</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 5) &#123;</span><br><span class="line">            day_left = 214 + (31 - a.day - 1);</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 6) &#123;</span><br><span class="line">            day_left = 184 + (30 - a.day - 1);</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 7) &#123;</span><br><span class="line">            day_left = 153 + (31 - a.day - 1);</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 8) &#123;</span><br><span class="line">            day_left = 122 + (31 - a.day - 1);</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 9) &#123;</span><br><span class="line">            day_left = 92 + (30 - a.day - 1);</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 10) &#123;</span><br><span class="line">            day_left = 61 + (31 - a.day - 1);</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 11) &#123;</span><br><span class="line">            day_left = 31 + (30 - a.day - 1);</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 12) &#123;</span><br><span class="line">            day_left = 0 + (31 - a.day - 1);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    else &#123;</span><br><span class="line">        if (a.month == 1) &#123;</span><br><span class="line">            day_left = 365 - a.day - 1;</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 2) &#123;</span><br><span class="line">            day_left = 306 + (28 - a.day - 1);</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 3) &#123;</span><br><span class="line">            day_left = 275 + (31 - a.day - 1);</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 4) &#123;</span><br><span class="line">            day_left = 245 + (30 - a.day - 1);</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 5) &#123;</span><br><span class="line">            day_left = 214 + (31 - a.day - 1);</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 6) &#123;</span><br><span class="line">            day_left = 184 + (30 - a.day - 1);</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 7) &#123;</span><br><span class="line">            day_left = 153 + (31 - a.day - 1);</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 8) &#123;</span><br><span class="line">            day_left = 122 + (31 - a.day - 1);</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 9) &#123;</span><br><span class="line">            day_left = 92 + (30 - a.day - 1);</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 10) &#123;</span><br><span class="line">            day_left = 61 + (31 - a.day - 1);</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 11) &#123;</span><br><span class="line">            day_left = 31 + (30 - a.day - 1);</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 12) &#123;</span><br><span class="line">            day_left = 0 + (31 - a.day - 1);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if (leap_year(b.year)) &#123;</span><br><span class="line">        if (a.month == 1) &#123;</span><br><span class="line">            day_right = b.day;</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 2) &#123;</span><br><span class="line">            day_right = 31+b.day;</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 3) &#123;</span><br><span class="line">            day_right = 60+b.day;</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 4) &#123;</span><br><span class="line">            day_right = 91+b.day;</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 5) &#123;</span><br><span class="line">            day_right = 121+b.day;</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 6) &#123;</span><br><span class="line">            day_right = 152+b.day;</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 7) &#123;</span><br><span class="line">            day_right = 182+b.day;</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 8) &#123;</span><br><span class="line">            day_right = 213+b.day;</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 9) &#123;</span><br><span class="line">            day_right = 244+b.day;</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 10) &#123;</span><br><span class="line">            day_right = 274+b.day;</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 11) &#123;</span><br><span class="line">            day_right = 305+b.day;</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 12) &#123;</span><br><span class="line">            day_right = 335+b.day;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    else &#123;</span><br><span class="line">        if (a.month == 1) &#123;</span><br><span class="line">            day_right = b.day;</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 2) &#123;</span><br><span class="line">            day_right = 31 + b.day;</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 3) &#123;</span><br><span class="line">            day_right = 59 + b.day;</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 4) &#123;</span><br><span class="line">            day_right = 90 + b.day;</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 5) &#123;</span><br><span class="line">            day_right = 120 + b.day;</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 6) &#123;</span><br><span class="line">            day_right = 151 + b.day;</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 7) &#123;</span><br><span class="line">            day_right = 181 + b.day;</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 8) &#123;</span><br><span class="line">            day_right = 212 + b.day;</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 9) &#123;</span><br><span class="line">            day_right = 243 + b.day;</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 10) &#123;</span><br><span class="line">            day_right = 273 + b.day;</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 11) &#123;</span><br><span class="line">            day_right = 304 + b.day;</span><br><span class="line">        &#125;</span><br><span class="line">        if (a.month == 12) &#123;</span><br><span class="line">            day_right = 334 + b.day;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    hour_left = 24 - a.hour - 1;</span><br><span class="line">    hour_right = b.hour;</span><br><span class="line">    if (a.year == b.year &amp;&amp; a.month == b.month &amp;&amp; a.day == b.day) &#123;</span><br><span class="line">        if (b.min &gt; a.min) &#123;</span><br><span class="line">            return (b.hour - a.hour + 1);</span><br><span class="line">        &#125;</span><br><span class="line">        else &#123;</span><br><span class="line">            return (b.hour - a.hour);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    else &#123;</span><br><span class="line">        return(8760 * normal_year_num + 8784 * leap_year_num + 24 * day_left + 24 * day_right + hour_left + hour_right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">bool judge_chepai(char* a,char* b)</span><br><span class="line">&#123;</span><br><span class="line">    unsigned long num_a;</span><br><span class="line">    unsigned long num_b;</span><br><span class="line">    num_a=strlen(a);</span><br><span class="line">    num_b=strlen(b);</span><br><span class="line">    if(num_a!=num_b)&#123;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">    else&#123;</span><br><span class="line">        int flag=0;</span><br><span class="line">        for(int i=0;i&lt;num_a;i++)&#123;</span><br><span class="line">            if(a[i]!=b[i])&#123;</span><br><span class="line">                flag=1;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        if(flag==0)&#123;</span><br><span class="line">            return true;</span><br><span class="line">        &#125;</span><br><span class="line">        else&#123;</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">int vehicle_kind(char* pai,park* Car,park* Electric ,park* Truck,int a,int b,int c)</span><br><span class="line">&#123;</span><br><span class="line">    int type=0;</span><br><span class="line">    for(int i=0;i&lt;=a;i++)&#123;</span><br><span class="line">        if(judge_chepai(Car[i].chepai,pai))&#123;</span><br><span class="line">            type=1;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    for(int i=0;i&lt;=b;i++)&#123;</span><br><span class="line">        if(Electric[i].chepai==pai)&#123;</span><br><span class="line">            type=2;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    for(int i=0;i&lt;=c;i++)&#123;</span><br><span class="line">        if(Truck[i].chepai==pai)&#123;</span><br><span class="line">            type=3;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return type;</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    cout &lt;&lt; &quot;    停车场管理系统&quot; &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; &quot;  (1)初始化停车场&quot; &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; &quot;  (2)停车&quot; &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; &quot;  (3)取车&quot; &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; &quot;  (4)查询车辆&quot; &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; &quot;  (5)显示停车场信息&quot; &lt;&lt;endl;</span><br><span class="line">    cout &lt;&lt; &quot;  (6)系统使用说明&quot; &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; &quot;  (7)清除数据&quot; &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; &quot;  (8)退出&quot; &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; &quot;第一次使用系统请先初始化停车场&quot; &lt;&lt; endl;</span><br><span class="line">    int flag;</span><br><span class="line">    int car_sum=0;</span><br><span class="line">    int electric_sum=0;</span><br><span class="line">    int truck_sum=0;</span><br><span class="line">    int TYPE=0;</span><br><span class="line">    int choose_wei=0;</span><br><span class="line">    char* pai;</span><br><span class="line">    pai=new char[5];</span><br><span class="line">    park* tcc = NULL;</span><br><span class="line">    int wei=0;</span><br><span class="line">    int Load;</span><br><span class="line">    int car_price=0;</span><br><span class="line">    int electric_price=0;</span><br><span class="line">    int truck_price=0;</span><br><span class="line">    while (1) &#123;</span><br><span class="line">        cout &lt;&lt; &quot;请输入您需要的操作类型：&quot; &lt;&lt; endl;</span><br><span class="line">        cin &gt;&gt; flag;</span><br><span class="line">        if (flag == 1) &#123;</span><br><span class="line">            fstream read;</span><br><span class="line">            fstream write;</span><br><span class="line">            read.open(&quot;chang.dat&quot;,ios::in|ios::binary);</span><br><span class="line">            chang c;</span><br><span class="line">            read.read((char*)&amp;c, sizeof(c));</span><br><span class="line">            if(c.car_sum==0)&#123;</span><br><span class="line">                write.open(&quot;chang.dat&quot;,ios::out|ios::binary);</span><br><span class="line">                cout&lt;&lt;&quot;无存档&quot;&lt;&lt;endl;</span><br><span class="line">                cout &lt;&lt; &quot;请依次输入您停车场轿车，电动车，货车的容量&quot; &lt;&lt; endl;</span><br><span class="line">                cout &lt;&lt; &quot;轿车：&quot; &lt;&lt; endl;</span><br><span class="line">                cin &gt;&gt; car_sum;</span><br><span class="line">                cout &lt;&lt; &quot;电动车：&quot; &lt;&lt; endl;</span><br><span class="line">                cin &gt;&gt; electric_sum;</span><br><span class="line">                cout &lt;&lt; &quot;货车：&quot; &lt;&lt; endl;</span><br><span class="line">                cin &gt;&gt; truck_sum;</span><br><span class="line">                cout &lt;&lt; &quot;您的停车场已经根据轿车，电动车，货车数量编辑好车位号&quot; &lt;&lt; endl;</span><br><span class="line">                //park.type=1轿车2电动车3货车</span><br><span class="line">                cout&lt;&lt;&quot;请输入您的收费标准(元/小时)&quot;&lt;&lt;endl;</span><br><span class="line">                cout &lt;&lt; &quot;轿车&quot; &lt;&lt; endl;</span><br><span class="line">                cin &gt;&gt; car_price;</span><br><span class="line">                cout &lt;&lt; &quot;电动车&quot; &lt;&lt; endl;</span><br><span class="line">                cin &gt;&gt; electric_price;</span><br><span class="line">                cout &lt;&lt; &quot;货车&quot; &lt;&lt; endl;</span><br><span class="line">                cin &gt;&gt; truck_price;</span><br><span class="line">                cout &lt;&lt; &quot;停车场已初始化完成&quot; &lt;&lt; endl;</span><br><span class="line">                chang n;</span><br><span class="line">                n.car_sum=car_sum;</span><br><span class="line">                n.electric_sum=electric_sum;</span><br><span class="line">                n.truck_sum=truck_sum;</span><br><span class="line">                n.car_price=car_price;</span><br><span class="line">                n.electric_price=electric_price;</span><br><span class="line">                n.truck_price=truck_price;</span><br><span class="line">                write.write((char*)&amp;n, sizeof(n));</span><br><span class="line">            &#125;</span><br><span class="line">            else&#123;</span><br><span class="line">                int flag=0;</span><br><span class="line">                cout&lt;&lt;&quot;已有存档，是否使用存档：&quot;&lt;&lt;endl;</span><br><span class="line">                cout&lt;&lt;&quot;(1)使用存档&quot;&lt;&lt;endl;</span><br><span class="line">                cout&lt;&lt;&quot;(2)不使用存档&quot;&lt;&lt;endl;</span><br><span class="line">                cin&gt;&gt;flag;</span><br><span class="line">                chang n;</span><br><span class="line">                read.read((char*)&amp;n, sizeof(n));</span><br><span class="line">                if(flag==1)&#123;</span><br><span class="line">                    car_sum=n.car_sum;</span><br><span class="line">                    electric_sum=n.electric_sum;</span><br><span class="line">                    truck_sum=n.truck_sum;</span><br><span class="line">                    car_price=n.car_price;</span><br><span class="line">                    electric_price=n.electric_price;</span><br><span class="line">                    truck_price=n.truck_price;</span><br><span class="line">                    cout &lt;&lt; &quot;停车场已初始化完成&quot; &lt;&lt; endl;</span><br><span class="line">                &#125;</span><br><span class="line">                if(flag==2)&#123;</span><br><span class="line">                    cout &lt;&lt; &quot;请依次输入您停车场轿车，电动车，货车的容量&quot; &lt;&lt; endl;</span><br><span class="line">                    cout &lt;&lt; &quot;轿车：&quot; &lt;&lt; endl;</span><br><span class="line">                    cin &gt;&gt; car_sum;</span><br><span class="line">                    cout &lt;&lt; &quot;电动车：&quot; &lt;&lt; endl;</span><br><span class="line">                    cin &gt;&gt; electric_sum;</span><br><span class="line">                    cout &lt;&lt; &quot;货车：&quot; &lt;&lt; endl;</span><br><span class="line">                    cin &gt;&gt; truck_sum;</span><br><span class="line">                    cout &lt;&lt; &quot;您的停车场已经根据轿车，电动车，货车数量编辑好车位号&quot; &lt;&lt; endl;</span><br><span class="line">                    //park.type=1轿车2电动车3货车</span><br><span class="line">                    cout&lt;&lt;&quot;请输入您的收费标准(元/小时)&quot;&lt;&lt;endl;</span><br><span class="line">                    cout &lt;&lt; &quot;轿车&quot; &lt;&lt; endl;</span><br><span class="line">                    cin &gt;&gt; car_price;</span><br><span class="line">                    cout &lt;&lt; &quot;电动车&quot; &lt;&lt; endl;</span><br><span class="line">                    cin &gt;&gt; electric_price;</span><br><span class="line">                    cout &lt;&lt; &quot;货车&quot; &lt;&lt; endl;</span><br><span class="line">                    cin &gt;&gt; truck_price;</span><br><span class="line">                    cout &lt;&lt; &quot;停车场已初始化完成&quot; &lt;&lt; endl;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            tcc=new class park[car_sum+electric_sum+truck_sum];</span><br><span class="line">            for (int i = 0; i &lt; car_sum; i++) &#123;</span><br><span class="line">                tcc[i].type = 1;</span><br><span class="line">                tcc[i].chewei = i;</span><br><span class="line">                tcc[i].chepai[0] = &#x27;\0&#x27;;</span><br><span class="line">            &#125;</span><br><span class="line">            for (int i = car_sum; i &lt; car_sum+electric_sum; i++) &#123;</span><br><span class="line">                tcc[i].type = 2;</span><br><span class="line">                tcc[i].chewei = i-car_sum+1;</span><br><span class="line">                tcc[i].chepai[0] = &#x27;\0&#x27;;</span><br><span class="line">            &#125;</span><br><span class="line">            for (int i = car_sum+electric_sum; i &lt;car_sum+electric_sum+truck_sum; i++) &#123;</span><br><span class="line">                tcc[i].type = 3;</span><br><span class="line">                tcc[i].chewei = i-car_sum-electric_sum+1;</span><br><span class="line">                tcc[i].chepai[0] = &#x27;\0&#x27;;</span><br><span class="line">            &#125;</span><br><span class="line">            chang m(car_sum,electric_sum,truck_sum,car_price,electric_price,truck_price);</span><br><span class="line">            write.write((char*)&amp;m, sizeof(m));</span><br><span class="line">            write.close();</span><br><span class="line">            read.close();</span><br><span class="line">        &#125;</span><br><span class="line">        if(flag==8)&#123;</span><br><span class="line">            exit(0);</span><br><span class="line">        &#125;</span><br><span class="line">        if(flag==6)&#123;</span><br><span class="line">            cout&lt;&lt;&quot;1.初始化停车场：分别输入轿车电动车货车的数量，为其依次分配停车场位置，并编号，分别设置停不同车的停车场停车的价格。2.停车：输入想要停的车的类型，并输入想要停入的车位号，如果该车位有车则会提示该车位有车，如果该车位无车，则可以停入，并把该车的信息录入文件。3.取车：根据车牌号检索汽车的位置，能够自动读取系统时间与进入停车场的时间，自动进行计算，显示停车时长，删除该车的信息，显示停车过程的价格。4.查询：分为两种查询途径，第一种为按车牌号查找，第二种为按车位号查找，分别取出停车场信息，然后遍历查找，显示其详细信息。5.显示停车场信息：显示当前停车场的各种车辆车位数与停车数。6.帮助：显示该系统的使用帮助。7.清除数据：分为两种操作，第一种为重置该停车场的基础信息，第二种为清除所有停车场中的车辆信息。8.退出：退出该系统。&quot;&lt;&lt;endl;</span><br><span class="line">        &#125;</span><br><span class="line">        if(car_sum==0)&#123;</span><br><span class="line">            cout&lt;&lt;&quot;未完成初始化，请先对停车场进行初始化&quot;&lt;&lt;endl;</span><br><span class="line">        &#125;</span><br><span class="line">        else&#123;</span><br><span class="line">            if (flag == 2) &#123;</span><br><span class="line">                fstream write;</span><br><span class="line">                write.open(&quot;park.dat&quot;, ios::app | ios::binary);</span><br><span class="line">                if (!write) &#123;</span><br><span class="line">                    cout &lt;&lt; &quot;error!&quot; &lt;&lt; endl;</span><br><span class="line">                    exit(0);</span><br><span class="line">                &#125;</span><br><span class="line">                time_t nowtime;</span><br><span class="line">                struct tm* p;</span><br><span class="line">                time(&amp;nowtime);</span><br><span class="line">                p = localtime(&amp;nowtime);</span><br><span class="line">                cout &lt;&lt; &quot;请输入您车的类型&quot; &lt;&lt; endl;</span><br><span class="line">                cout &lt;&lt; &quot;(1)轿车(2)电动车(3)货车&quot; &lt;&lt; endl;</span><br><span class="line">                cin &gt;&gt; TYPE;</span><br><span class="line">                Time a(p-&gt;tm_year+1900,p-&gt;tm_mon+1,p-&gt;tm_mday,p-&gt;tm_hour,p-&gt;tm_min);</span><br><span class="line">                if (TYPE == 1) &#123;</span><br><span class="line">                    int h = 0;</span><br><span class="line">                    cout&lt;&lt;&quot;轿车的停车价格为：&quot;&lt;&lt;car_price&lt;&lt;&quot;元/小时&quot;&lt;&lt;endl;</span><br><span class="line">                    while (h == 0) &#123;</span><br><span class="line">                        cout &lt;&lt; &quot;请在0-&quot; &lt;&lt; car_sum &lt;&lt; &quot;之间选择您的车位号&quot; &lt;&lt; endl;</span><br><span class="line">                        cin &gt;&gt; choose_wei;</span><br><span class="line">                        if (tcc[choose_wei-1].chepai[0]==&#x27;\0&#x27;) &#123;</span><br><span class="line">                            h = 1;</span><br><span class="line">                            cout &lt;&lt; &quot;请输入您的车牌号(4位数字)：&quot; &lt;&lt; endl;</span><br><span class="line">                            string p;</span><br><span class="line">                            cin &gt;&gt; p;</span><br><span class="line">                            for(int i=0;i&lt;5;i++)&#123;</span><br><span class="line">                                pai[i]=p[i];</span><br><span class="line">                            &#125;</span><br><span class="line">                            strcpy(tcc[choose_wei-1].chepai , pai);</span><br><span class="line">                            cout &lt;&lt; &quot;停车时间：&quot; &lt;&lt; endl;</span><br><span class="line">                            a.print();</span><br><span class="line">                            park m(a,1,choose_wei,pai,true);</span><br><span class="line">                            write.write((char*)&amp;m, sizeof(m));</span><br><span class="line">                            write.close();</span><br><span class="line">                        &#125;</span><br><span class="line">                        else &#123;</span><br><span class="line">                            cout &lt;&lt; &quot;此车位已有车，请选择另一个车位&quot; &lt;&lt; endl;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                if (TYPE == 2) &#123;</span><br><span class="line">                    int h = 0;</span><br><span class="line">                    cout&lt;&lt;&quot;电动车的停车价格为：&quot;&lt;&lt;electric_price&lt;&lt;&quot;元/小时&quot;&lt;&lt;endl;</span><br><span class="line">                    while (h == 0) &#123;</span><br><span class="line">                        cout &lt;&lt; &quot;请在0-&quot; &lt;&lt; electric_sum &lt;&lt; &quot;之间选择您的车位号&quot; &lt;&lt; endl;</span><br><span class="line">                        cin &gt;&gt; choose_wei;</span><br><span class="line">                        if (tcc[car_sum+choose_wei-1].chepai[0] == &#x27;\0&#x27;) &#123;</span><br><span class="line">                            h = 1;</span><br><span class="line">                            cout &lt;&lt; &quot;请输入您的车牌号(4位数字)：&quot; &lt;&lt; endl;</span><br><span class="line">                            string p;</span><br><span class="line">                            cin &gt;&gt; p;</span><br><span class="line">                            for(int i=0;i&lt;5;i++)&#123;</span><br><span class="line">                                pai[i]=p[i];</span><br><span class="line">                            &#125;</span><br><span class="line">                            strcpy(tcc[car_sum+choose_wei-1].chepai , pai);</span><br><span class="line">                            cout &lt;&lt; &quot;停车时间：&quot; &lt;&lt; endl;</span><br><span class="line">                            a.print();</span><br><span class="line">                            park m(a,2,choose_wei,pai,true);</span><br><span class="line">                            write.write((char*)&amp;m, sizeof(m));</span><br><span class="line">                            write.close();</span><br><span class="line">                        &#125;</span><br><span class="line">                        else &#123;</span><br><span class="line">                            cout &lt;&lt; &quot;此车位已有车，请选择另一个车位&quot; &lt;&lt; endl;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                if (TYPE == 3) &#123;</span><br><span class="line">                    int h = 0;</span><br><span class="line">                    cout&lt;&lt;&quot;货车的停车价格为：&quot;&lt;&lt;truck_price&lt;&lt;&quot;元/小时&quot;&lt;&lt;endl;</span><br><span class="line">                    cout &lt;&lt; &quot;请在0-&quot; &lt;&lt; truck_sum &lt;&lt; &quot;之间选择您的车位号&quot; &lt;&lt; endl;</span><br><span class="line">                    cin &gt;&gt; choose_wei;</span><br><span class="line">                    while(h==0)&#123;</span><br><span class="line">                        if (tcc[choose_wei+car_sum+electric_sum-1].chepai[0] == &#x27;\0&#x27;) &#123;</span><br><span class="line">                            h = 1;</span><br><span class="line">                            cout &lt;&lt; &quot;请输入您的车牌号(4位数字)：&quot; &lt;&lt; endl;</span><br><span class="line">                            string p;</span><br><span class="line">                            cin &gt;&gt; p;</span><br><span class="line">                            for(int i=0;i&lt;5;i++)&#123;</span><br><span class="line">                                pai[i]=p[i];</span><br><span class="line">                            &#125;</span><br><span class="line">                            cout &lt;&lt; &quot;请输入您的载货量(吨)：&quot; &lt;&lt; endl;</span><br><span class="line">                            cin &gt;&gt; Load;</span><br><span class="line">                            strcpy(tcc[car_sum+electric_sum+choose_wei-1].chepai,pai);</span><br><span class="line">                            cout &lt;&lt; &quot;停车时间：&quot; &lt;&lt; endl;</span><br><span class="line">                            a.print();</span><br><span class="line">                            park m(a,3,choose_wei,pai,true);</span><br><span class="line">                            write.write((char*)&amp;m, sizeof(m));</span><br><span class="line">                            write.close();</span><br><span class="line">                        &#125;</span><br><span class="line">                        else &#123;</span><br><span class="line">                            cout &lt;&lt; &quot;此车位已有车，请选择另一个车位&quot; &lt;&lt; endl;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            if (flag == 3) &#123;</span><br><span class="line">                Time r;</span><br><span class="line">                cout &lt;&lt; &quot;请输入您要取车的车牌号(4位数字):&quot; &lt;&lt; endl;</span><br><span class="line">                string o;</span><br><span class="line">                cin &gt;&gt; o;</span><br><span class="line">                for(int i=0;i&lt;5;i++)&#123;</span><br><span class="line">                    pai[i]=o[i];</span><br><span class="line">                &#125;</span><br><span class="line">                time_t nowtime;</span><br><span class="line">                struct tm* p;</span><br><span class="line">                time(&amp;nowtime);</span><br><span class="line">                p = localtime(&amp;nowtime);</span><br><span class="line">                Time a(p-&gt;tm_year+1900,p-&gt;tm_mon+1,p-&gt;tm_mday,p-&gt;tm_hour,p-&gt;tm_min);</span><br><span class="line">                fstream write;</span><br><span class="line">                fstream read;</span><br><span class="line">                read.open(&quot;park.dat&quot;,ios::in|ios::binary);</span><br><span class="line">                if(!read) &#123;</span><br><span class="line">                    cout &lt;&lt; &quot;打开文件失败&quot; &lt;&lt;endl;</span><br><span class="line">                    read.close();</span><br><span class="line">                &#125;</span><br><span class="line">                park *park;</span><br><span class="line">                park= new class park [car_sum+electric_sum+truck_sum];</span><br><span class="line">                </span><br><span class="line">                int i=0;</span><br><span class="line">                while(read.read((char*)&amp;park[i],sizeof(park[i])))&#123;</span><br><span class="line">                    i++;</span><br><span class="line">                &#125;</span><br><span class="line">                read.close();</span><br><span class="line">                int j;</span><br><span class="line">                int hour=0;</span><br><span class="line">                int u=1;</span><br><span class="line">                for(j=0;j&lt;i;j++)&#123;</span><br><span class="line">                    if(judge_chepai(pai,park[j].chepai))&#123;</span><br><span class="line">                        u=0;</span><br><span class="line">                        r=park[j].t;</span><br><span class="line">                        hour=sum_time(park[j].t, a);</span><br><span class="line">                        for(int f=j;f&lt;i;f++)&#123;</span><br><span class="line">                            park[f]=park[f+1];</span><br><span class="line">                        &#125;</span><br><span class="line">                        break;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                if(u==1)&#123;</span><br><span class="line">                    cout&lt;&lt;&quot;该停车场无该车&quot;&lt;&lt;endl;</span><br><span class="line">                &#125;</span><br><span class="line">                else&#123;</span><br><span class="line">                    int n=0;</span><br><span class="line">                    write.open(&quot;park.dat&quot;,ios::out|ios::binary);</span><br><span class="line">                    while(write.write((char*)&amp;park[n],sizeof(park[n]))&amp;&amp;n&lt;i-2)&#123;</span><br><span class="line">                        n++;</span><br><span class="line">                    &#125;</span><br><span class="line">                    cout&lt;&lt;&quot;车牌号为&quot;&lt;&lt;pai&lt;&lt;&quot;的车&quot;&lt;&lt;endl;</span><br><span class="line">                    cout&lt;&lt;&quot;停车时间为：&quot;&lt;&lt;endl;</span><br><span class="line">                    r.print();</span><br><span class="line">                    cout&lt;&lt;&quot;取车时间为：&quot;&lt;&lt;endl;</span><br><span class="line">                    a.print();</span><br><span class="line">                    cout&lt;&lt;&quot;共停车&quot;&lt;&lt;hour&lt;&lt;&quot;小时&quot;&lt;&lt;endl;</span><br><span class="line">                    if(park[j].type==1)&#123;</span><br><span class="line">                        cout&lt;&lt;&quot;需缴费&quot;&lt;&lt;hour*car_price&lt;&lt;&quot;元&quot;&lt;&lt;endl;</span><br><span class="line">                    &#125;</span><br><span class="line">                    if(park[j].type==2)&#123;</span><br><span class="line">                        cout&lt;&lt;&quot;需缴费&quot;&lt;&lt;hour*electric_price&lt;&lt;&quot;元&quot;&lt;&lt;endl;</span><br><span class="line">                    &#125;</span><br><span class="line">                    if(park[j].type==3)&#123;</span><br><span class="line">                        cout&lt;&lt;&quot;需缴费&quot;&lt;&lt;hour*truck_price&lt;&lt;&quot;元&quot;&lt;&lt;endl;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                write.close();</span><br><span class="line">            &#125;</span><br><span class="line">            if(flag==4)&#123;</span><br><span class="line">                int s=0;</span><br><span class="line">                cout&lt;&lt;&quot;(1)按车牌号查找&quot;&lt;&lt;endl;</span><br><span class="line">                cout&lt;&lt;&quot;(2)按车位号查找&quot;&lt;&lt;endl;</span><br><span class="line">                cout&lt;&lt;&quot;请输入查找方式：&quot;&lt;&lt;endl;</span><br><span class="line">                cin&gt;&gt;s;</span><br><span class="line">                if(s==1)&#123;</span><br><span class="line">                    cout&lt;&lt;&quot;请输入您的车牌号：&quot;&lt;&lt;endl;</span><br><span class="line">                    string p;</span><br><span class="line">                    cin &gt;&gt; p;</span><br><span class="line">                    for(int i=0;i&lt;5;i++)&#123;</span><br><span class="line">                        pai[i]=p[i];</span><br><span class="line">                    &#125;</span><br><span class="line">                    fstream read;</span><br><span class="line">                    read.open(&quot;park.dat&quot;,ios::in|ios::binary);</span><br><span class="line">                    if(!read) &#123;</span><br><span class="line">                        cout &lt;&lt; &quot;error&quot; &lt;&lt;endl;</span><br><span class="line">                        read.close();</span><br><span class="line">                    &#125;</span><br><span class="line">                    park *sum;</span><br><span class="line">                    sum= new park [car_sum+electric_sum+truck_sum];</span><br><span class="line">                    </span><br><span class="line">                    int i=0;</span><br><span class="line">                    while(read.read((char*)&amp;sum[i],sizeof(sum[i])))&#123;</span><br><span class="line">                        i++;</span><br><span class="line">                    &#125;</span><br><span class="line">                    read.close();</span><br><span class="line">                    int j;</span><br><span class="line">                    int u=1;</span><br><span class="line">                    for(j=0;j&lt;i;j++)&#123;</span><br><span class="line">                        if(judge_chepai(pai,sum[j].chepai))&#123;</span><br><span class="line">                            u=0;</span><br><span class="line">                            break;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    if(u==1)&#123;</span><br><span class="line">                        cout&lt;&lt;&quot;该停车场无该车&quot;&lt;&lt;endl;</span><br><span class="line">                    &#125;</span><br><span class="line">                    else&#123;</span><br><span class="line">                        Time a;</span><br><span class="line">                        sum[j].print();</span><br><span class="line">                        cout&lt;&lt;&quot;停车时间：&quot;&lt;&lt;endl;</span><br><span class="line">                        a=sum[j].t;</span><br><span class="line">                        a.print();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                if(s==2)&#123;</span><br><span class="line">                    int type;</span><br><span class="line">                    cout&lt;&lt;&quot;(1)轿车&quot;&lt;&lt;endl;</span><br><span class="line">                    cout&lt;&lt;&quot;(2)电动车&quot;&lt;&lt;endl;</span><br><span class="line">                    cout&lt;&lt;&quot;(3)卡车&quot;&lt;&lt;endl;</span><br><span class="line">                    cout&lt;&lt;&quot;请输入车的类型：&quot;&lt;&lt;endl;</span><br><span class="line">                    cin&gt;&gt;type;</span><br><span class="line">                    cout&lt;&lt;&quot;请输入您的车位号：&quot;&lt;&lt;endl;</span><br><span class="line">                    cin&gt;&gt;wei;</span><br><span class="line">                    fstream read;</span><br><span class="line">                    read.open(&quot;park.dat&quot;,ios::in|ios::binary);</span><br><span class="line">                    if(!read) &#123;</span><br><span class="line">                        cout &lt;&lt; &quot;error&quot; &lt;&lt;endl;</span><br><span class="line">                        read.close();</span><br><span class="line">                    &#125;</span><br><span class="line">                    park *sum;</span><br><span class="line">                    sum= new park [car_sum+electric_sum+truck_sum];</span><br><span class="line">                    </span><br><span class="line">                    int i=0;</span><br><span class="line">                    while(read.read((char*)&amp;sum[i],sizeof(sum[i])))&#123;</span><br><span class="line">                        i++;</span><br><span class="line">                    &#125;</span><br><span class="line">                    read.close();</span><br><span class="line">                    int j;</span><br><span class="line">                    int u=1;</span><br><span class="line">                    for(j=0;j&lt;i;j++)&#123;</span><br><span class="line">                        if(wei==sum[j].chewei)&#123;</span><br><span class="line">                            u=0;</span><br><span class="line">                            break;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    if(u==1)&#123;</span><br><span class="line">                        cout&lt;&lt;&quot;该停车场无该车&quot;&lt;&lt;endl;</span><br><span class="line">                    &#125;</span><br><span class="line">                    else&#123;</span><br><span class="line">                        Time a;</span><br><span class="line">                        sum[j].print();</span><br><span class="line">                        cout&lt;&lt;&quot;停车时间：&quot;&lt;&lt;endl;</span><br><span class="line">                        a=sum[j].t;</span><br><span class="line">                        a.print();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            if(flag==5)&#123;</span><br><span class="line">                int i=0;</span><br><span class="line">                fstream read;</span><br><span class="line">                park o[car_sum+electric_sum+truck_sum];</span><br><span class="line">                read.open(&quot;park.dat&quot;,ios::in|ios::binary);</span><br><span class="line">                while(!read.eof())</span><br><span class="line">                &#123;</span><br><span class="line">                    read.read((char*)&amp;o[i],sizeof(o[i]));</span><br><span class="line">                    i++;</span><br><span class="line">                &#125;</span><br><span class="line">                int car_num=0;</span><br><span class="line">                int electric_num=0;</span><br><span class="line">                int truck_num=0;</span><br><span class="line">                for(int j=0;j&lt;i;j++)&#123;</span><br><span class="line">                    if(o[j].type==1)&#123;</span><br><span class="line">                        car_num++;</span><br><span class="line">                    &#125;</span><br><span class="line">                    if(o[j].type==2)&#123;</span><br><span class="line">                        electric_num++;</span><br><span class="line">                    &#125;</span><br><span class="line">                    if(o[j].type==3)&#123;</span><br><span class="line">                        truck_num++;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                cout&lt;&lt;&quot;轿车&quot;&lt;&lt;endl;</span><br><span class="line">                cout&lt;&lt;&quot;车位总数：&quot;&lt;&lt;car_sum&lt;&lt;endl;</span><br><span class="line">                cout&lt;&lt;&quot;空余车位数量：&quot;&lt;&lt;car_sum-car_num&lt;&lt;endl;</span><br><span class="line">                cout&lt;&lt;&quot;价格：&quot;&lt;&lt;car_price&lt;&lt;&quot;元/小时&quot;&lt;&lt;endl;</span><br><span class="line">                cout&lt;&lt;&quot;电动车&quot;&lt;&lt;endl;</span><br><span class="line">                cout&lt;&lt;&quot;车位数：&quot;&lt;&lt;electric_sum&lt;&lt;endl;</span><br><span class="line">                cout&lt;&lt;&quot;空余车位数量：&quot;&lt;&lt;electric_sum-electric_num&lt;&lt;endl;</span><br><span class="line">                cout&lt;&lt;&quot;价格：&quot;&lt;&lt;electric_price&lt;&lt;&quot;元/小时&quot;&lt;&lt;endl;</span><br><span class="line">                cout&lt;&lt;&quot;货车&quot;&lt;&lt;endl;</span><br><span class="line">                cout&lt;&lt;&quot;车位数：&quot;&lt;&lt;truck_sum&lt;&lt;endl;</span><br><span class="line">                cout&lt;&lt;&quot;空余车位数量：&quot;&lt;&lt;truck_sum-truck_num&lt;&lt;endl;</span><br><span class="line">                cout&lt;&lt;&quot;价格：&quot;&lt;&lt;truck_price&lt;&lt;&quot;元/小时&quot;&lt;&lt;endl;</span><br><span class="line">            &#125;</span><br><span class="line">            if(flag==7)&#123;</span><br><span class="line">                int t;</span><br><span class="line">                cout&lt;&lt;&quot;(1)重置停车场&quot;&lt;&lt;endl;</span><br><span class="line">                cout&lt;&lt;&quot;(2)重置车辆信息&quot;&lt;&lt;endl;</span><br><span class="line">                cout&lt;&lt;&quot;请输入您想进行的操作：&quot;&lt;&lt;endl;</span><br><span class="line">                cin&gt;&gt;t;</span><br><span class="line">                if(t==1)&#123;</span><br><span class="line">                    fstream a;</span><br><span class="line">                    fstream b;</span><br><span class="line">                    a.open(&quot;park.dat&quot;,ios::out);</span><br><span class="line">                    b.open(&quot;chang.dat&quot;,ios::out);</span><br><span class="line">                    if(!a)&#123;</span><br><span class="line">                        cout&lt;&lt;&quot;error&quot;&lt;&lt;endl;</span><br><span class="line">                        exit(0);</span><br><span class="line">                    &#125;</span><br><span class="line">                    if(!b)&#123;</span><br><span class="line">                        cout&lt;&lt;&quot;error&quot;&lt;&lt;endl;</span><br><span class="line">                        exit(0);</span><br><span class="line">                    &#125;</span><br><span class="line">                    b.close();</span><br><span class="line">                    a.close();</span><br><span class="line">                &#125;</span><br><span class="line">                if(t==2)&#123;</span><br><span class="line">                    fstream a;</span><br><span class="line">                    a.open(&quot;park.dat&quot;,ios::out);</span><br><span class="line">                    if(!a)&#123;</span><br><span class="line">                        cout&lt;&lt;&quot;error&quot;&lt;&lt;endl;</span><br><span class="line">                        exit(0);</span><br><span class="line">                    &#125;</span><br><span class="line">                    a.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>项目</category>
      </categories>
      <tags>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>虚函数</title>
    <url>/Stouyx/2023/05/15/%E8%99%9A%E5%87%BD%E6%95%B0/</url>
    <content><![CDATA[<p>C++中的虚函数是用于实现多态性的一种机制。虚函数可以在基类中声明并在派生类中重写，当通过基类指针或引用调用虚函数时，实际调用的是派生类中的实现，这种行为被称为动态绑定。</p>
<h2 id="虚函数的作用"><a href="#虚函数的作用" class="headerlink" title="虚函数的作用"></a>虚函数的作用</h2><p>允许派生类重写基类中定义的函数。在基类中声明虚函数，如果派生类中有同名函数并且使用了关键字 virtual 进行了声明，那么这个函数就是虚函数，可以被派生类重写。<br>实现动态绑定。如果使用基类指针或引用调用虚函数，实际上调用的是指向对象的实际类型所实现的版本，而不是基类中的版本。这使得程序能够以一种更加灵活的方式使用对象，可以在运行时动态地确定调用哪个函数。<br>虚函数的应用广泛，特别是在面向对象程序设计中，常常被用来实现多态性和基于接口的编程，提高了程序的可扩展性和可维护性。<br>虚函数用于弥补覆盖的缺陷<br>对函数进行覆盖后，在基类中调用覆盖后的函数还是会调用基类中的函数，<br>但是当基类中的函数为虚函数，那么将调用子类中的覆盖后的函数</p>
<h2 id="虚函数的定义"><a href="#虚函数的定义" class="headerlink" title="虚函数的定义"></a>虚函数的定义</h2><p>在实现c++多态时会用到虚函数。虚函数使用的其核心目的是通过基类访问派生类定义的函数。所谓虚函数就是在基类定义一个未实现的函数名，为了提高程序的可读性，建议后代中虚函数都加上virtual关键字。一般格式：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">class base</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line"> base();</span><br><span class="line"> virtual void test(); //定义的一个虚函数</span><br><span class="line">private:</span><br><span class="line"> char *basePStr;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>上述代码在基类中定义了一个test的虚函数，所有可以在其子类重新定义父类的做法这种行为成为覆盖（override）,或者为重写。</p>
<p>常见用法：声明基类指针，利用指针指向任意一个子类对象，调用相关的虚函数，动态绑定，由于编写代码时不能确定被调用的是基类函数还是那个派生类函数，所以被称为“”虚“”函数。如果没有使用虚函数的话，即没有利用C++多态性，则利用基类指针调用相应的函数的时候，将总被限制在基类函数本身，而无法调用到子类中被重写过的函数。</p>
<h2 id="纯虚函数"><a href="#纯虚函数" class="headerlink" title="纯虚函数"></a>纯虚函数</h2><p>定义：</p>
<p>纯虚函数是在基类中声明的虚函数，它在基类中没有定义，但要求任何派生类都要定义自己的实现方法。在基类中实现纯虚函数的方法是在函数原型后加 &#x3D;0:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">virtual void funtion1()=0</span><br></pre></td></tr></table></figure>
<p>在很多情况下，基类本身生成对象是不合情理的。例如，动物作为一个基类可以派生出老虎、孔雀等子类，但动物本身生成对象明显不合常理。</p>
<p>为了解决上述问题，引入了纯虚函数的概念，将函数定义为纯虚函数（方法：virtual ReturnType Function()&#x3D; 0;），则编译器要求在派生类中必须予以重写以实现多态性。同时含有纯虚拟函数的类称为抽象类，它不能生成对象。这样就很好地解决了上述两个问题。</p>
<p>声明了纯虚函数的类是一个抽象类。所以，用户不能创建类的实例，只能创建它的派生类的实例。</p>
<p>纯虚函数最显著的特征是：它们必须在继承类中重新声明函数（不要后面的＝0，否则该派生类也不能实例化），而且它们在抽象类中往往没有定义。</p>
<p>定义纯虚函数的目的在于，使派生类仅仅只是继承函数的接口。</p>
]]></content>
      <categories>
        <category>语法</category>
      </categories>
      <tags>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>继承</title>
    <url>/Stouyx/2023/05/15/%E7%BB%A7%E6%89%BF/</url>
    <content><![CDATA[<h2 id="发现问题"><a href="#发现问题" class="headerlink" title="发现问题"></a>发现问题</h2><p>当我们编写一个类时，发现这个类与类外一个类的成员变量和成员方法相似，并且具有一定的包含关系时，我们编写的这两个类会有很多相似的地方。</p>
<h2 id="概念："><a href="#概念：" class="headerlink" title="概念："></a>概念：</h2><p>继承机制是面向对象程序设计使代码可以复用的重要手段。它允许程序员在保持原有类特性的基础上进行扩展，增加功能，这样产生的类称为派生类。</p>
<p>继承呈现了面向对象程序设计的层次结构，体现了由简单到复杂的认知过程。以前我们接触的复用都是函数复用，继承使类设计层次的复用。</p>
<p>简单来说就是，继承就是一个类复用了另外一个类的成员函数和成员变量。就好像在这个类里编写了另外一个类的成员。</p>
<img src="https://www.helloimg.com/images/2023/05/15/oEb7F9.png" width="90%" height="50%">


<img src="https://www.helloimg.com/images/2023/05/15/oEbDnX.png" width="90%" height="50%">


<img src="https://www.helloimg.com/images/2023/05/15/oEbIzg.png" width="90%" height="30%">


<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>基类的私有成员在派生类中不可以见，基类的其它成员在派生类中的访问方式是：继承方式和基类该成员访问限定符范围那个小，就是什么访问方式，等价于min(继承方式，基类该成员访问限定符)。范围从大到小：public &gt; protected &gt; private</p>
<p>基类的private成员，无论以什么继承方式继承，在派生类里是不可以访问的。但是，派生类还是继承了基类，只是在语法上限制了派生类在类里或者类外对基类私有成员的访问。</p>
<p>基类protected成员，通过public或者protected继承方式继承的派生类，该成员变成了派生类的protected成员，只能在类里访问，不能在类外访问。但是基类的private成员，派生类不可见，在继承中体现了两者的区别。可以看出保护成员限定符因继承才出现的。</p>
<p>使用关键字class定义的类的默认继承方式是private，使用关键字struct定义的类的默认继承方式是public，但是，最后显示写出继承方式。<br>在实际运用中一般使用public继承，很少用protected和private继承。因为protected和private继承下来的成员只能在派生类中使用，实用性不强。</p>
<h2 id="基类和派生类对象的赋值转化"><a href="#基类和派生类对象的赋值转化" class="headerlink" title="基类和派生类对象的赋值转化"></a>基类和派生类对象的赋值转化</h2><p>派生类可以给基类赋值<br>派生类对象可以赋值给基类对象&#x2F;基类指针&#x2F;基类引用。这里有一个形象的说法是切片或者切割，意思是将派生类父类中的那部分切来赋值过去。</p>
<img src="https://www.helloimg.com/images/2023/05/15/oEbKtP.png" width="90%" height="80%">


<img src="https://www.helloimg.com/images/2023/05/15/oEbUv6.png" width="90%" height="30%">

<p>基类对象不能赋值给派生类对象。因为基类对象中可能没有派生类中的成员，所以赋值不过去。<br>但是当一个基类指针指向派生类时，可以通过强制类型转化赋值给派生类指针。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">class Person</span><br><span class="line">&#123;</span><br><span class="line">protected:</span><br><span class="line">	string _name; // 姓名</span><br><span class="line">	string _sex; // 性别</span><br><span class="line">	int _age; // 年龄</span><br><span class="line">&#125;;</span><br><span class="line">class Student : public Person</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	int _No; // 学号</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">void Test()</span><br><span class="line">&#123;</span><br><span class="line">	Student s;</span><br><span class="line">	// 1.子类对象可以赋值给父类对象/指针/引用</span><br><span class="line">	Person p1 = s;</span><br><span class="line">	Person* pp = &amp;s;</span><br><span class="line">	Person&amp; rp = s;</span><br><span class="line"> </span><br><span class="line">	//2.基类对象不能赋值给派生类对象，会报错</span><br><span class="line">	s = p1;</span><br><span class="line"> </span><br><span class="line">	// 3.基类的指针可以通过强制类型转换赋值给派生类的指针</span><br><span class="line">    //前提，指向基类指针指向派生类</span><br><span class="line">	pp = &amp;s;</span><br><span class="line">	Student* ps1 = (Student*)pp; // 这种情况转换时可以的。</span><br><span class="line">	ps1-&gt;_No = 10;</span><br><span class="line">	//基类指针指向基类的话</span><br><span class="line">	pp = &amp;p1;</span><br><span class="line">	Student* ps2 = (Student*)pp; // 这种情况转换时虽然可以，但是会存在越界访问的问题，</span><br><span class="line">	//由于基类中没有_NO成员，访问会越界</span><br><span class="line">	ps2-&gt;_No = 10;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="继承中的作用域"><a href="#继承中的作用域" class="headerlink" title="继承中的作用域"></a>继承中的作用域</h2><p>在继承体系中基类和派生类具有独立的作用域。</p>
<p>派生类和基类具有同名成员(成员变量和成员函数)时，派生类将屏蔽对父类同名成员的直接访问，这种情况叫隐藏(重定义)。除非指定作用域：基类名 : : 基类成员 (显示访问)</p>
<img src="https://www.helloimg.com/images/2023/05/15/oEbgfn.png" width="90%" height="40%">



<p>如果基类与派生类有同名函数，那么基类的同名函数将会被隐藏，在调用函数的时候，基类函数无法被调用，只能调用派生类的函数（传参不同也不可，函数隐藏不同于函数重载）</p>
<img src="https://www.helloimg.com/images/2023/05/15/oEbrqR.png" width="60%" height="60%">


<img src="https://www.helloimg.com/images/2023/05/15/oEbVTz.png" width="90%" height="40%">

<p>注意：在实际的继承体系同最好不要定义同名成员。</p>
<h2 id="构造函数："><a href="#构造函数：" class="headerlink" title="构造函数："></a>构造函数：</h2><p>派生类的构造函数必须去调用基类的构造函数去初始化基类的那一部分成员。如果基类没有默认构造函数(无参，全缺省或者编译器生成)，必须在派生类构造函数中显示调用基类的构造函数。<br>有参数的子类构造函数必须调用父类构造函数<br>&lt;子类名&gt;::&lt;子类名&gt;(参数列表):父类名(参数列表)<br>{<br>    成员&#x3D;形参<br>}</p>
<h2 id="拷贝构造函数"><a href="#拷贝构造函数" class="headerlink" title="拷贝构造函数"></a>拷贝构造函数</h2><p>派生类的拷贝构造函数必须调用基类的拷贝构造函数完成属于基类成员的拷贝构造。</p>
<p>派生类的赋值操作符重载函数(operator&#x3D;)必须调用基类的赋值操作符重载函数(operator&#x3D;)赋值属于基类的成员。<br>注意：在派生类里调用基类的赋值重载函数要加类作用域限定符。</p>
<img src="https://www.helloimg.com/images/2023/05/15/oEbYUA.png" width="90%" height="40%">

<h2 id="析构函数"><a href="#析构函数" class="headerlink" title="析构函数"></a>析构函数</h2><p>派生类先调用基类的构造，再调用派生类的构造。<br>派生类对象析构，先调用派生类的析构，再调用基类的析构。</p>
<h2 id="继承与友元"><a href="#继承与友元" class="headerlink" title="继承与友元"></a>继承与友元</h2><p>基类友元的关系，派生类不能继承下来。也就是说基类的友元不能访问派生类的私有和保护成员。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">class Student;//声明</span><br><span class="line">class Person</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	friend void Print(Person&amp; p, Student&amp; s);//友元</span><br><span class="line">protected:</span><br><span class="line">	string _name = &quot;tom&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line">class Student :public Person</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    //friend void Print(Person&amp; p, Student&amp; s);解决</span><br><span class="line">protected:</span><br><span class="line">	int _age = 10;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line">void Print(Person&amp; p, Student&amp; s)&#123;</span><br><span class="line">	cout &lt;&lt; p._name &lt;&lt; endl;</span><br><span class="line">	//cout &lt;&lt; s._age &lt;&lt; endl;</span><br><span class="line">	//报错，友元不能继承，不能访问派生类的保护成员</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	Person p;</span><br><span class="line">	Student s;</span><br><span class="line">	Print(p, s);</span><br><span class="line">	system(&quot;pause&quot;);</span><br><span class="line">	return 0;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="继承与静态成员"><a href="#继承与静态成员" class="headerlink" title="继承与静态成员"></a>继承与静态成员</h2><p> 基类定义了一个静态成员，在继承体系中，只有这一个成员。也就是说，无论派生了多少派生类，操作的这个静态成员都是一个成员。</p>
<img src="https://www.helloimg.com/images/2023/05/15/oEbhP5.png" width="40%" height="100%">


<img src="https://s1.imagehub.cc/images/2023/05/15/image.png" width="90%" height="40%">



]]></content>
      <categories>
        <category>语法</category>
      </categories>
      <tags>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>隐藏重载覆盖</title>
    <url>/Stouyx/2023/05/09/%E9%9A%90%E8%97%8F%E9%87%8D%E8%BD%BD%E8%A6%86%E7%9B%96/</url>
    <content><![CDATA[<p>存在父子类继承关系时，若有同名成员函数同时存在，会发生隐藏、覆盖和重载这几种情况。</p>
<h2 id="隐藏"><a href="#隐藏" class="headerlink" title="隐藏"></a>隐藏</h2><p>子类对象优先考虑子类域自身成员（成员变量和成员函数）<br>    隐藏发生的主要原因，就是当子类有父类的同名成员时，子类对象访问该成员时，会发生冲突。所以编译器的处理方式是，优先考虑子类域中的自身成员。即，子类对象访问某成员时，如ch.m_m 或者ch.f(),成员变量和成员函数都一样。编译器首先在子类域中检索，如果在子类域中找到该成员，则检索结束，返回该成员进行访问。如果在子类域中找不到该成员，则去父类域中检索。如果父类域中存在，则返回该成员进行访问，如果父类域中也不存在，则编译错误，该成员无效。</p>
<p>  当父子类域都存在同一成员时，编译器优先在子类中检索，就算父类域中也存在该同名成员，也不会被检索到。因此，父类域中的该成员被子类域中的该同名成员隐藏，即访问时完全以为该成员不存在，如果想访问父类域中的该成员，只能通过显示调用的方式，即：ch.Father::m_m;<br>重载：相同域的同名不同参函数</p>
<h2 id="重载"><a href="#重载" class="headerlink" title="重载"></a>重载</h2><p>　　<br>　　重载必须是发生在同一个域中的两个同名不同形参之间的。如果一个在父类域一个在子类域，是不会存在重载的，属于隐藏的情况。调用时，只会在子类域中搜索，如果形参不符合，会认为没有该函数，而不会去父类域中搜索。<br>覆盖是指派生类函数覆盖基类函数，特征是：<br>（1）不同的范围（分别位于派生类与基类）；<br>（2）函数名字相同；<br>（3）参数相同；<br>（4）基类函数必须有virtual 关键字。<br>令人迷惑的隐藏规则<br>本来仅仅区别重载与覆盖并不算困难，但是C++的隐藏规则使问题复杂性陡然增加。<br>这里“隐藏”是指派生类的函数屏蔽了与其同名的基类函数，规则如下：<br>（1）如果派生类的函数与基类的函数同名，但是参数不同。此时，不论有无virtual<br>关键字，基类的函数将被隐藏（注意别与重载混淆）。<br>（2）如果派生类的函数与基类的函数同名，并且参数也相同，但是基类函数没有virtual<br>关键字。此时，基类的函数被隐藏（注意别与覆盖混淆）。</p>
]]></content>
      <categories>
        <category>语法</category>
      </categories>
      <tags>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>静态成员函数</title>
    <url>/Stouyx/2023/05/08/%E9%9D%99%E6%80%81%E6%88%90%E5%91%98/</url>
    <content><![CDATA[<h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p>静态成员函数的声明也很简单，就是在类的成员函数前加上static关键字即可，和静态成员一样，静态成员函数也是属于类的，它并不属于任何对象，当调用静态成员函数时应该使用类名和域运算符“∷”，当然也可以使用对象调用操作，但是这样的操作并不意味着静态成员函数属于这个对象，它只是被这个对象共享而已，这样也就决定了静态成员函数中是不能访问本类中的非静态数据成员的，它是不能访问非静态数据成员的，在c++中静态成员函数主要用来访问静态数据成员而不访问非静态数据成员</p>
<p>ps：<br>static int count()<br>name.count()<br>不表示count()属于name</p>
<p>1.静态成员函数不能调用非静态成员函数，但是反过来是可以的</p>
<p>2.静态成员函数没有this指针，也就是说静态成员函数不能使用修饰符(也就是函数后面的const关键字)</p>
<p>3.静态成员函数的地址可用普通函数指针储存，而普通成员函数地址需要用 类成员函数指针来储存。</p>
<p>总结：其实声明为静态，不论是静态数据成员还是静态成员函数，它们都是不依赖于对象而存在的，类在定义后并不分配存储空间，而是在定义类的对象的时候才分配存储空间，相反静态的数据成员和静态的成员函数是已经在内存中开辟了内存空间了，所以静态数据成员可以独立的访问在任何类对象没有建立起来都可以访问，并且静态成员函数不可以调用非静态成员函数，因为非静态成员函数只有在类对象建立以后才可以调用，相反则是可以的。<br><img src="https://www.helloimg.com/images/2023/05/09/oxnXZC.png" width="100%" height="100%"></p>
<h2 id="静态数据成员"><a href="#静态数据成员" class="headerlink" title="静态数据成员"></a>静态数据成员</h2><p>对象的成员函数（没有static的成员函数）内部，可以直接访问“静态数据成员”<br>类的静态成员函数（有static的成员函数）内部，可以直接访问“静态数据成员”<br>即：所有的成员函数，都可以访问静态数据成员。<br>类不能直接访问普通的静态数据成员（Human::humanCount 非法）</p>
<h2 id="静态成员函数"><a href="#静态成员函数" class="headerlink" title="静态成员函数"></a>静态成员函数</h2><p>对象可以直接访问静态成员函数<br>类可以直接访问静态成员函数（Human::getHumanCount()）<br>在类的静态成员函数（类的静态方法）内部，不能直接访问this指针和对象的数据成员！<br>在类的静态成员函数（类的静态方法）内部，只能访问类的数据成员</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//定义Student类</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">class Student                  </span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">//定义构造函数</span><br><span class="line">Student(int n,int a,float s):num(n),age(a),score(s)&#123; &#125;      </span><br><span class="line">void total();</span><br><span class="line">//声明静态成员函数</span><br><span class="line">static float average();      </span><br><span class="line">private:</span><br><span class="line">    int num;</span><br><span class="line">    int age;</span><br><span class="line">    float score;</span><br><span class="line">    //静态数据成员，累计学生的总分</span><br><span class="line">    static float sum; </span><br><span class="line">    //静态数据成员，累计学生的人数</span><br><span class="line">    static int count;           </span><br><span class="line">&#125;;</span><br><span class="line">//在全局作用域对静态数据成员初始化，如果不赋予初值，则使用其默认值零</span><br><span class="line">float Student::sum;                     </span><br><span class="line">int Student::count;</span><br><span class="line">//定义非静态成员函数</span><br><span class="line">void Student::total()                    </span><br><span class="line">&#123;</span><br><span class="line">    //累加总分</span><br><span class="line">    sum+=score;</span><br><span class="line">    //累计已统计的人数</span><br><span class="line">    count++;                               </span><br><span class="line">&#125;</span><br><span class="line">//定义静态成员函数</span><br><span class="line">float  Student::average()                  </span><br><span class="line">&#123;</span><br><span class="line">    return(sum/count);</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    Student stud[3]=&#123;    </span><br><span class="line">    //定义对象数组并初始化</span><br><span class="line">    Student(1001,18,70),</span><br><span class="line">    Student(1002,19,78),</span><br><span class="line">    Student(1005,20,98)</span><br><span class="line">&#125;;</span><br><span class="line">int n;</span><br><span class="line">std::cout&lt;&lt;&quot;please input the number of students: &quot;;</span><br><span class="line"> //输入需要求前面多少名学生的平均成绩</span><br><span class="line">std::cin&gt;&gt;n;                              </span><br><span class="line">//调用3次total函数</span><br><span class="line">for(int i=0;i&lt;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">    stud[i].total();</span><br><span class="line">&#125;</span><br><span class="line">//调用静态成员函数</span><br><span class="line">std::cout&lt;&lt;&quot;the average score of &quot;&lt;&lt;n&lt;&lt;&quot; students is &quot;&lt;&lt;Student::average( )&lt;&lt;std::endl;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>语法</category>
      </categories>
      <tags>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>运算符重载</title>
    <url>/Stouyx/2023/05/08/%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD/</url>
    <content><![CDATA[<h2 id="不能重载的运算符："><a href="#不能重载的运算符：" class="headerlink" title="不能重载的运算符："></a>不能重载的运算符：</h2><img src="https://www.helloimg.com/images/2023/05/09/oxnnSP.png" width="100%" height="100%">

<h2 id="赋值运算符重载"><a href="#赋值运算符重载" class="headerlink" title="赋值运算符重载"></a>赋值运算符重载</h2><p>模板为 </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">people operator = (const people &amp; a)</span><br><span class="line">&#123;</span><br><span class="line">	delete [] char*;</span><br><span class="line">	赋值；</span><br><span class="line">	return *this</span><br><span class="line">&#125;</span><br><span class="line">#include &lt;cstring&gt;</span><br><span class="line">#include &lt;sstream&gt;</span><br><span class="line">class HugeInteger&#123;</span><br><span class="line">public:</span><br><span class="line">	HugeInteger&amp; operator=(const HugeInteger &amp;h);</span><br><span class="line">private:</span><br><span class="line">    string str;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">HugeInteger&amp; HugeInteger::operator=(const HugeInteger &amp;h)</span><br><span class="line">&#123;</span><br><span class="line">    this-&gt;str=h.str;</span><br><span class="line">    return *this;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="算术运算符的重载"><a href="#算术运算符的重载" class="headerlink" title="算术运算符的重载"></a>算术运算符的重载</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">people operator + (const people &amp; a)</span><br><span class="line">&#123;</span><br><span class="line">	people b;</span><br><span class="line">	b.r=r+a.r;</span><br><span class="line">	return b;</span><br><span class="line">&#125;</span><br><span class="line">+、++、–、- -、+=、-=、/、*</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">class complex&#123;</span><br><span class="line">public:</span><br><span class="line">    complex(double r=0,double i=0)&#123;</span><br><span class="line">        this-&gt;r=r;</span><br><span class="line">        this-&gt;i=i;</span><br><span class="line">    &#125;</span><br><span class="line">    complex operator+(complex&amp;);</span><br><span class="line">    complex operator-(complex&amp;);</span><br><span class="line">    complex operator+=(complex&amp;);</span><br><span class="line">private:</span><br><span class="line">    double r, i;</span><br><span class="line">&#125;;</span><br><span class="line">complex complex::operator+(complex &amp;c)&#123;</span><br><span class="line">    return complex(r+c.r,i+c.i);</span><br><span class="line">&#125;</span><br><span class="line">complex complex::operator-(complex &amp;c)&#123;</span><br><span class="line">    return complex(r-c.r,i-c.i);</span><br><span class="line">&#125;</span><br><span class="line">complex complex::operator+=(complex &amp;c)&#123;</span><br><span class="line">    r+=c.r;</span><br><span class="line">    i+=c.i;</span><br><span class="line">    return *this;//return complex(r,i)亦可</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="关系运算符的重载"><a href="#关系运算符的重载" class="headerlink" title="关系运算符的重载"></a>关系运算符的重载</h2><p>模板为 </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">bool people:: operator == (const people &amp;a)</span><br><span class="line">&#123;</span><br><span class="line">	if()</span><br><span class="line">	&#123;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt; </span><br><span class="line">#include &lt;cstring&gt; </span><br><span class="line">using namespace std;</span><br><span class="line">class String</span><br><span class="line">&#123;</span><br><span class="line">private:</span><br><span class="line">    string str;   </span><br><span class="line">public:</span><br><span class="line">	String(string s)&#123;str=s;&#125;</span><br><span class="line">	friend bool operator&gt;(const String &amp;st1, const String &amp;st2);</span><br><span class="line">	friend bool operator==(const String &amp;st, const String &amp;st2);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">bool operator&gt;(const String &amp;st1, const String &amp;st2)</span><br><span class="line">&#123;</span><br><span class="line">    return (std::strcmp(st1.str, st2.str) &gt; 0);</span><br><span class="line">&#125;</span><br><span class="line">bool operator==(const String &amp;st1, const String &amp;st2)</span><br><span class="line">&#123;</span><br><span class="line">    return (std::strcmp(st1.str, st2.str) == 0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="单目运算符："><a href="#单目运算符：" class="headerlink" title="单目运算符："></a>单目运算符：</h2><p>单目运算符只作用于当前对象所以不需要传参<br>前置++：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">people operator ++ ()</span><br><span class="line">&#123;</span><br><span class="line">	++r;</span><br><span class="line">	return *this;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>后置++：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">people operator ++ (int)</span><br><span class="line">&#123;</span><br><span class="line">	people a(r);    用当前对象的数据初始化a</span><br><span class="line">	</span><br><span class="line">	a.r++;</span><br><span class="line">	return a;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>在这里给出重载&lt;&lt;,&gt;&gt;,[]的方法<br>模板：<br>(1)cout&lt;&lt;：<br>friend ostream &amp;operator&lt;&lt;(ostream &amp;cout，const classname&amp; 实例对象) &#x2F; ostream &amp;operator&lt;&lt;(ostream &amp;cout)<br>(2)cin&gt;&gt;：friend istream &amp;operator&gt;&gt;(istream &amp;cin，classname&amp; 实例对象) &#x2F; istream &amp;operator&gt;&gt;(istream &amp;cin)<br>(3)[ ]：typename &amp; operator[ ] (形参表)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt; </span><br><span class="line">#include &lt;cstring&gt; </span><br><span class="line">using namespace std;</span><br><span class="line">class String</span><br><span class="line">&#123;</span><br><span class="line">private:</span><br><span class="line">    string str;   </span><br><span class="line">public:</span><br><span class="line">	String(string s)&#123;str=s;&#125;</span><br><span class="line">	char &amp; operator[](int i);</span><br><span class="line">	friend ostream &amp; operator&lt;&lt;(ostream &amp; cout, const String &amp; st);</span><br><span class="line">    friend istream &amp; operator&gt;&gt;(istream &amp; cin, String &amp; st);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">char &amp;String::operator[](int i)</span><br><span class="line">&#123;</span><br><span class="line">    return str[i];</span><br><span class="line">&#125;</span><br><span class="line">ostream &amp;operator&lt;&lt;(ostream &amp; cout, const String &amp;st)</span><br><span class="line">&#123;</span><br><span class="line">    cout &lt;&lt; st.str;</span><br><span class="line">    return cout;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">istream &amp;operator&gt;&gt;(istream &amp; cin, String &amp;st)</span><br><span class="line">&#123;</span><br><span class="line">    char temp[40];</span><br><span class="line">    is.get(temp, 40);</span><br><span class="line">    if (cin)</span><br><span class="line">        st = temp;</span><br><span class="line">    while (cin &amp;&amp; cin.get() != &#x27;\n&#x27;)</span><br><span class="line">        continue;</span><br><span class="line">    return cin;</span><br><span class="line">&#125;</span><br><span class="line">istream&amp; operator&gt;&gt;(istream&amp; ins,_Point&amp; target)</span><br><span class="line">&#123;</span><br><span class="line">        //输入到两个变量里面</span><br><span class="line">        ins&gt;&gt;target.x&gt;&gt;target.y;</span><br><span class="line">        return ins;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>语法</category>
      </categories>
      <tags>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>基本引用</title>
    <url>/Stouyx/2023/05/15/%E5%9F%BA%E6%9C%AC%E5%BC%95%E7%94%A8/</url>
    <content><![CDATA[<h2 id="实际上是起别名"><a href="#实际上是起别名" class="headerlink" title="实际上是起别名"></a>实际上是起别名</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">int a=1001;</span><br><span class="line">int &amp;b = a;</span><br><span class="line">b=1002</span><br><span class="line">cout&lt;&lt;a&lt;&lt;endl;</span><br><span class="line">//输出为1002；</span><br></pre></td></tr></table></figure>

<h2 id="用在形参："><a href="#用在形参：" class="headerlink" title="用在形参："></a>用在形参：</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">void change(int &amp;b)</span><br><span class="line">&#123;</span><br><span class="line">	b=1003;</span><br><span class="line">&#125;</span><br><span class="line">int a=1001;</span><br><span class="line">change(a);</span><br><span class="line">cout&lt;&lt;a&lt;&lt;endl;</span><br><span class="line">//输出为1003；</span><br></pre></td></tr></table></figure>
<h2 id="用于类"><a href="#用于类" class="headerlink" title="用于类"></a>用于类</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">class mm</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">	string&amp; getname()</span><br><span class="line">	&#123;</span><br><span class="line">		return name;</span><br><span class="line">	&#125;</span><br><span class="line">protected:</span><br><span class="line">	string name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">mm a;</span><br><span class="line">a.getname()=&quot;Tom&quot;</span><br><span class="line">//此时a中的name 为Tom</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>语法</category>
      </categories>
      <tags>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>this指针</title>
    <url>/Stouyx/2023/05/15/this%E6%8C%87%E9%92%88/</url>
    <content><![CDATA[<p>成员函数调用本身时用this指针</p>
<img src="https://s1.imagehub.cc/images/2023/05/15/image10d895e6d4e49f3a.png" width="90%" height="40%">

<p>当构造函数中的形参与数据成员重名时必须用this指针</p>
<img src="https://s1.imagehub.cc/images/2023/05/15/image89ba83e49e0238b7.png" width="90%" height="40%">
]]></content>
      <categories>
        <category>语法</category>
      </categories>
      <tags>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>指向基类的指针</title>
    <url>/Stouyx/2023/05/15/%E6%8C%87%E5%90%91%E5%9F%BA%E7%B1%BB%E7%9A%84%E6%8C%87%E9%92%88/</url>
    <content><![CDATA[<p>指向基类的指针可以指向子类<br>animal *p;(基类)<br>monkey c;(子类)<br>p&#x3D;&amp;c;</p>
<p>如果子类覆盖了基类的成员，但是通过基类指针所访问的成员仍是基类的成员，而不是子类的成员</p>
<p>当指向子类的基类指针调用被覆盖了的成员时，假如基类中的被覆盖成员为虚函数，则调用子类中的成员，如果其不是虚函数，则调用基类中的成员。</p>
]]></content>
      <categories>
        <category>语法</category>
      </categories>
      <tags>
        <tag>C++</tag>
      </tags>
  </entry>
</search>
